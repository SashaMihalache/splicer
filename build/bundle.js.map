{"version":3,"file":"bundle.js","sources":["../src/splicer/buffer-loader.js","../src/splicer/engine.js","../src/main.js"],"sourcesContent":["class BufferLoader {\n  constructor(context, urlList, callback) {\n    this.context = context;\n    this.urlList = urlList;\n    this.isDone = callback;\n    this.bufferList = [];\n    this.loadCount = 0;\n\n    this.init();\n  }\n\n  init() {\n    for (let i = 0; i < this.urlList.length; ++i) {\n      this.loadBuffer(this.urlList[i], i);\n    }\n  }\n\n  loadBuffer(url, index) {\n    fetch(url)\n      .then(body => {\n\n        body.arrayBuffer()\n          .then(buffer => {\n\n            this.context.decodeAudioData(buffer, (audio) => {\n              if (!audio) alert('Error decoding file data: ' + url);\n\n              this.bufferList[index] = audio;\n\n              // when all buffers are loaded and decoded, callback\n              if (++this.loadCount == this.urlList.length) {\n                this.isDone(this.bufferList);\n              }\n            }\n            )\n          })\n          .catch(err => console.log('Error buffering', err));\n      })\n      .catch(err => {\n        alert('Buffer Loader : Fetch Error');\n      })\n  }\n\n}\n\nexport default BufferLoader;","import BufferLoader from './buffer-loader';\n\nclass Engine {\n  constructor(tempo, sampleList) {\n    this.tempo = tempo;\n    this.sampleList = sampleList;\n    this.context = null;\n    this.init();\n  }\n\n  init() {\n    try {\n      this.context = new AudioContext();\n    }\n    catch (e) {\n      alert(\"Web Audio API is not supported in this browser\", e);\n    }\n\n    new BufferLoader(\n      this.context,\n      this.sampleList,\n      (bufferList) => this.finishedLoading(bufferList)\n    );\n  }\n\n  playSound(sample, time) {\n    var source = this.context.createBufferSource();\n    source.buffer = sample.buffer;\n    source.connect(this.context.destination);\n    if (!source.start) {\n      source.start = source.noteOn;\n    }\n    source.start(time);\n  }\n\n  finishedLoading(bufferList) {\n    const kick = this.context.createBufferSource();\n    const snare = this.context.createBufferSource();\n    const hihat = this.context.createBufferSource();\n    kick.buffer = bufferList[0];\n    snare.buffer = bufferList[1];\n    hihat.buffer = bufferList[2];\n\n    kick.connect(this.context.destination);\n    snare.connect(this.context.destination);\n    hihat.connect(this.context.destination);\n\n    const startTime = this.context.currentTime + 0.100;\n    const eighthNoteTime = (60 / this.tempo) / 2;\n\n    for (let bar = 0; bar < 2; bar++) {\n      const time = startTime + bar * 8 * eighthNoteTime;\n      // Play the bass (kick) drum on beats 1, 5\n      this.playSound(kick, time);\n      this.playSound(kick, time + 4 * eighthNoteTime);\n\n      // Play the snare drum on beats 3, 7\n      this.playSound(snare, time + 2 * eighthNoteTime);\n      this.playSound(snare, time + 6 * eighthNoteTime);\n\n      // Play the hi-hat every eighth note.\n      for (var i = 0; i < 8; ++i) {\n        this.playSound(hihat, time + i * eighthNoteTime);\n      }\n    }\n  }\n\n}\n\nexport default Engine;","import Engine from './splicer/engine';\nlet bufferLoader;\nconst playButton = document.querySelector('button');\nconst sampleList = [\n  \"src/audio/kick.wav\",\n  \"src/audio/snare.wav\",\n  \"src/audio/hihat.wav\",\n];\n\nplayButton.addEventListener('click', handlePlayClick);\n\nfunction handlePlayClick() {\n  new Engine(100, sampleList); //BPM and samplelist\n}\n\nconsole.log('wtf hah');"],"names":[],"mappings":"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"}